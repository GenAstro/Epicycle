var documenterSearchIndex = {"docs":
[{"location":"#AstroProp","page":"AstroProp","title":"AstroProp","text":"","category":"section"},{"location":"","page":"AstroProp","title":"AstroProp","text":"AstroProp provides force models, orbital propagators, and stopping conditions for modelling spacecraft motion. AstroProp provides interfaces to the extensive  numerical integration libraries in Julia's OrdinaryDiffEq.jl.  AstroProp is tested against the General Mission Analysis Tool (GMAT).","category":"page"},{"location":"#Quick-Start","page":"AstroProp","title":"Quick Start","text":"","category":"section"},{"location":"","page":"AstroProp","title":"AstroProp","text":"The example below shows how to propagate a spacecraft to various stopping conditions:","category":"page"},{"location":"","page":"AstroProp","title":"AstroProp","text":"using Epicycle\n\n# Spacecraft\nsat = Spacecraft(\n    state=CartesianState([7000.0, 300.0, 0.0, 0.0, 7.5, 0.03]),\n    time=Time(\"2015-09-21T12:23:12\", TAI(), ISOT()),\n    coord_sys=CoordinateSystem(earth, ICRFAxes()),\n)sa\n\n# Forces + integrator\ngravity = PointMassGravity(earth,(moon,sun))\nforces  = ForceModel(gravity)\ninteg   = IntegratorConfig(Tsit5(); dt=10.0, reltol=1e-9, abstol=1e-9)\nprop    = OrbitPropagator(forces, integ)\n\n# Propagate to periapsis\nstop = StopAt(sat, PosDotVel(), 0.0; direction=+1)\npropagate(prop, sat, stop)\nprintln(get_state(sat, Keplerian()))\n\n# Stop when |r| reaches 7000 km \npropagate(prop, sat, StopAt(sat, PosMag(), 7000.0))\nprintln(get_state(sat, SphericalRADEC()))       \n\n# Propagate backwards to node\nstop = StopAt(sat, PosZ(), 0.0)\nsol = propagate(prop, sat, stop; direction= :backward)\n\n# Propagate multiple spacecraft with multiple stopping conditions\nsc1 = Spacecraft(); sc2 = Spacecraft() \nstop_sc1_node = StopAt(sc1, PosZ(), 0.0)\nstop_sc2_periapsis = StopAt(sc2, PosDotVel(), 0.0; direction=+1)\npropagate(prop, [sc1,sc2], stop_sc1_node, stop_sc2_periapsis)\n","category":"page"},{"location":"#Core-Functions","page":"AstroProp","title":"Core Functions","text":"","category":"section"},{"location":"#AstroProp.OrbitPropagator","page":"AstroProp","title":"AstroProp.OrbitPropagator","text":"OrbitPropagator\n\nOrbital propagator configuration combining force models and integration settings.\n\nFields\n\nforces::ForceModel: Force model defining the orbital dynamics\ninteg::IntegratorConfig: Integration configuration (solver, tolerances, step size)\n\nExamples\n\ngravity = PointMassGravity(earth,(moon,sun))\nforces  = ForceModel(gravity)\ninteg   = IntegratorConfig(Tsit5(); dt=10.0, reltol=1e-9, abstol=1e-9)\nprop    = OrbitPropagator(forces, integ)\n\n\n\n\n\n","category":"type"},{"location":"#AstroProp.IntegratorConfig","page":"AstroProp","title":"AstroProp.IntegratorConfig","text":"IntegratorConfig\n\nConfiguration parameters for orbital integration using DifferentialEquations.jl solvers.\n\nFields\n\nintegrator::Any: ODE solver algorithm (e.g., Vern7(), Tsit5())\ndt::Union{Nothing, Float64}: Fixed step size in seconds, or Nothing for adaptive stepping\nreltol::Float64: Relative tolerance for integration accuracy\nabstol::Float64: Absolute tolerance for integration accuracy\n\nExample\n\ninteg = IntegratorConfig(Vern7(); dt=3600.0, abstol = 1e-12, reltol=1e-12)\n\n\n\n\n\n","category":"type"},{"location":"#AstroProp.propagate","page":"AstroProp","title":"AstroProp.propagate","text":"propagate(op::OrbitPropagator, sc_or_scs, stops...; direction=:forward, kwargs...)\n\nNumerically integrate spacecraft equations of motion using propagator  until stopping conditions are met.\n\nArguments\n\nop::OrbitPropagator: Propagator configuration containing force model and integrator settings\nsc_or_scs: Single Spacecraft or Vector{Spacecraft} to propagate\nstops...: One or more StopAt stopping conditions\n\nKeyword Arguments\n\ndirection::Symbol=:forward: Integration direction (:forward or :backward)\nkwargs...: Additional arguments passed to the underlying ODE solver\n\nReturns\n\nODESolution from DifferentialEquations.jl containing the complete trajectory solution. Access final states via sol.u[end], times via sol.t, or interpolate at any time.\n\nExamples\n\nusing Epicycle\n\n# Spacecraft\nsat = Spacecraft(\n    state=CartesianState([7000.0, 300.0, 0.0, 0.0, 7.5, 0.03]),\n    time=Time(\"2015-09-21T12:23:12\", TAI(), ISOT()),\n    #name=\"SC-StopAt\",\n    coord_sys=CoordinateSystem(earth, ICRFAxes()),\n)\n\n# Forces + integrator\ngravity = PointMassGravity(earth, (moon,sun))\nforces  = ForceModel(gravity)\ninteg   = IntegratorConfig(Tsit5(); dt=10.0, reltol=1e-9, abstol=1e-9)\nprop    = OrbitPropagator(forces, integ)\n\n# Propagate to periapsis\npropagate(prop, sat, StopAt(sat, PosDotVel(), 0.0; direction=+1))\n\n# Propagate backwards to node\npropagate(prop, sat, StopAt(sat, PosX(), 0.0); direction=:backward)\n\n# Propagate multiple spacecraft with multiple stopping conditions\nsc1 = Spacecraft(); sc2 = Spacecraft() \nstop_sc1_node = StopAt(sc1, PosZ(), 0.0)\nstop_sc2_periapsis = StopAt(sc2, PosDotVel(), 0.0; direction=+1)\npropagate(prop, [sc1,sc2], stop_sc1_node, stop_sc2_periapsis)\n\n\n\n\n\n\nThis interface will be deprecated in future releases.\n\npropagate(model::DynSys, config::IntegratorConfig, stop_conditions...; \n          direction=:forward, prop_stm=false, kwargs...)\n\nPropagate spacecraft orbital states using numerical integration.\n\n\n\n\n\n","category":"function"},{"location":"#AstroProp.StopAt","page":"AstroProp","title":"AstroProp.StopAt","text":"StopAt{S,V<:AbstractOrbitVar,T}\n\nGeneric stopping condition for orbital propagation based on calculated quantities.\n\nFields\n\nsubject::S: The object to evaluate (e.g., Spacecraft, Maneuver, CelestialBody)\nvar::V: The calculation variable to monitor (must be <: AbstractOrbitVar, e.g., PosX(), VelMag())\ntarget::T: Target value to stop at (numeric value or vector matching calc output)\ndirection::Int: Crossing direction (-1: decreasing, 0: any, +1: increasing)\n\nConstructor\n\nStopAt(subject, var, target; direction::Int=0)\n\nExamples\n\n# Stop when spacecraft reaches ascending node (z-position = 0, increasing)\nsc = Spacecraft(state=CartesianState([7000.0, 0, 0, 0, 7.5, 0]))\nstop_cond = StopAt(sc, PosZ(), 0.0; direction=+1)\n\n# Stop at apoapsis (position dot velocity = 0, decreasing)  \nstop_apo = StopAt(sc, PosDotVel(), 0.0; direction=-1)\n\n\n\n\n\n","category":"type"},{"location":"#API-Reference","page":"AstroProp","title":"API Reference","text":"","category":"section"},{"location":"#AstroProp.DynSys","page":"AstroProp","title":"AstroProp.DynSys","text":"DynSys(; spacecraft, forces)\n\nContainer for a dynamic system segment.\n\nKeyword Arguments\n\nspacecraft: Vector of spacecraft structs (subtypes of Spacecraft)\nforces: OrbitODE model (e.g. CartesianForceModel)\n\nFields\n\nspacecraft::Vector{<:Spacecraft}: Collection of spacecraft to propagate\nforces::OrbitODE: Force model defining the dynamics\n\nConstructor\n\nDynSys(; spacecraft, forces)\n\nExample\n\nsc = Spacecraft()\ngravity = PointMassGravity(earth, ())\nsys = DynSys(spacecraft=[sc], forces=gravity)\n\nNotes\n\nThis interface will be deprecated in future releases\n\n\n\n\n\n","category":"type"},{"location":"#AstroProp.ForceModel","page":"AstroProp","title":"AstroProp.ForceModel","text":"ForceModel{N} <: OrbitODE\n\nA collection of orbital dynamics forces and perturbations for spacecraft propagation.\n\nFields\n\nforces::NTuple{N, OrbitODE}: Tuple of force models (e.g., gravity, drag, solar radiation pressure)\ncenter::Union{CelestialBody, Nothing}: Central gravitational body, determined automatically from forces\n\nConstructor\n\nForceModel(forces...)\nForceModel(force_tuple)\n\nThe central body is automatically determined from the primary gravitational force in the model.\n\nExample\n\ngravity = PointMassGravity(earth, ())\nmodel = ForceModel(gravity)\n\n\n\n\n\n","category":"type"},{"location":"#AstroProp.ForceModel-Union{Tuple{Tuple{Vararg{T}}}, Tuple{T}} where T<:OrbitODE","page":"AstroProp","title":"AstroProp.ForceModel","text":"ForceModel(forces...)\nForceModel(force_tuple)\n\nCreate a force model for orbital propagation from one or more force components.\n\nArguments\n\nforces...: Variable number of force objects (e.g., PointMassGravity)\nforce_tuple: Tuple of force objects\n\nReturns\n\nForceModel{N}: Force model with N force components\n\nThe central gravitational body is automatically determined from the primary  gravitational force in the collection.\n\nExamples\n\ngravity = PointMassGravity(earth)\nmodel = ForceModel(gravity)\n\n\n\n\n\n","category":"method"},{"location":"#AstroProp.PointMassGravity","page":"AstroProp","title":"AstroProp.PointMassGravity","text":"PointMassGravity\n\nCombined force model for central body gravity and N-body point-mass perturbations.\n\nFields\n\ncentral_body::CelestialBody: The central body about which dynamics are referenced.\nperturbers::Tuple{Vararg{CelestialBody}}: Other celestial bodies treated as point-mass perturbers.\ndependencies::Vector{Type{<:AbstractVar}}: Vector of variable dependencies (e.g., PosVel)\nnum_funs::Int: Number of functions in the ODE\n\n\n\n\n\n","category":"type"},{"location":"#AstroProp.PosVel","page":"AstroProp","title":"AstroProp.PosVel","text":"PosVel <: AbstractState\n\nPosition-velocity state representation for orbital propagation. This is a legacy  state type used internally by the propagation system.\n\nFields\n\nnumvars::Int: Number of state variables (always 6 for position and velocity)\n\nNotes\n\nThis struct is marked for deprecation and should be replaced with new state  representations from AstroStates.\n\n\n\n\n\n","category":"type"},{"location":"#AstroProp.StopAtApoapsis-Tuple{Spacecraft}","page":"AstroProp","title":"AstroProp.StopAtApoapsis","text":"StopAtApo(sc::Spacecraft)\n\nConstructs a ContinuousCallback for stopping at apoapsis of sc.     This interface is replaced by AstroCallbacks Calcs and will be deprecated in future releases.\n\n\n\n\n\n","category":"method"},{"location":"#AstroProp.StopAtAscendingNode-Tuple{Spacecraft}","page":"AstroProp","title":"AstroProp.StopAtAscendingNode","text":"StopAtAscendingNode(sc::Spacecraft)\n\nConstructs a ContinuousCallback for stopping at ascending node of sc. This interface is replaced by AstroCallbacks Calcs and will be deprecated in future releases.\n\n\n\n\n\n","category":"method"},{"location":"#AstroProp.StopAtDays-Tuple{Float64}","page":"AstroProp","title":"AstroProp.StopAtDays","text":"StopAtDays(days::Float64)\n\nReturns a DiscreteCallback that stops the integrator after days of simulation time. This interface is replaced by AstroCallbacks Calcs and will be deprecated in future releases.\n\n\n\n\n\n","category":"method"},{"location":"#AstroProp.StopAtPeriapsis-Tuple{Spacecraft}","page":"AstroProp","title":"AstroProp.StopAtPeriapsis","text":"StopAtPeriapsis(sc::Spacecraft)\n\nConstructs a ContinuousCallback for stopping at periapsis of sc. This interface is replaced by AstroCallbacks Calcs and will be deprecated in future releases.\n\n\n\n\n\n","category":"method"},{"location":"#AstroProp.StopAtRadius-Tuple{Spacecraft, Float64}","page":"AstroProp","title":"AstroProp.StopAtRadius","text":"StopAtRadius(sc::Spacecraft, target_radius::Float64)\n\nReturns a ContinuousCallback that triggers when norm(pos) - target_radius = 0. This interface is replaced by AstroCallbacks Calcs and will be deprecated in future releases.\n\n\n\n\n\n","category":"method"},{"location":"#AstroProp.StopAtSeconds-Tuple{Float64}","page":"AstroProp","title":"AstroProp.StopAtSeconds","text":"StopAtSeconds(seconds::Float64)\n\nReturns a DiscreteCallback that stops the integrator at t = seconds. This interface is replaced by AstroCallbacks Calcs and will be deprecated in future releases.\n\n\n\n\n\n","category":"method"},{"location":"#AstroProp._build_callback-Tuple{StopAt, Any}","page":"AstroProp","title":"AstroProp._build_callback","text":"_build_callback(cond::StopAt, dynsys)\n\nBuild a DifferentialEquations.jl ContinuousCallback for a StopAt condition.\n\n\n\n\n\n","category":"method"},{"location":"#AstroProp._posvel_from_u-Tuple{Any, Any, Spacecraft}","page":"AstroProp","title":"AstroProp._posvel_from_u","text":"function posvelfrom_u(u, dynsys, sc::Spacecraft)\n\nExtract a 6x1 Cartesian pos/vel slice for a spacecraft from integrator state u\n\n\n\n\n\n","category":"method"},{"location":"#AstroProp._sc_index-Tuple{Any, Spacecraft}","page":"AstroProp","title":"AstroProp._sc_index","text":"scindex(dynsys, sc::Spacecraft)\n\nFind spacecraft index in a DynSys\n\n\n\n\n\n","category":"method"},{"location":"#AstroProp._subject_update_from_u!-Tuple{Any, Any, Any}","page":"AstroProp","title":"AstroProp._subject_update_from_u!","text":"subjectupdatefromu!(subject, dynsys, u)\n\nUpdate a subject from the integrator state u (specialize per subject type)\n\n\n\n\n\n","category":"method"},{"location":"#AstroProp._subject_update_from_u!-Tuple{Spacecraft, Any, Any}","page":"AstroProp","title":"AstroProp._subject_update_from_u!","text":"subjectupdatefromu!(sc::Spacecraft, dynsys, u)\n\nMap Cartesian state slice to spacecraft struct state\n\n\n\n\n\n","category":"method"},{"location":"#AstroProp.accel_eval!-Tuple{PointMassGravity, Time, Vector, Vector, Spacecraft, Any}","page":"AstroProp","title":"AstroProp.accel_eval!","text":"accel_eval!(model::PointMassGravity, t::Time, x̄::Vector, \n             x̄̇::Vector, sc::Spacecraft, params; jac::Dict = Dict())\n\nEvaluate the acceleration due to point-mass gravity from central and perturbing bodies.\n\n\n\n\n\n","category":"method"},{"location":"#AstroProp.apsis_condition-Tuple{Spacecraft}","page":"AstroProp","title":"AstroProp.apsis_condition","text":"apoapsis_condition(sc::Spacecraft)\n\nReturns a closure that evaluates the apoapsis condition r ⋅ v = 0  using the spacecraft's registered :posvel index in the ODE registry. This interface is replaced by AstroCallbacks Calcs and will be deprecated in future releases.\n\n\n\n\n\n","category":"method"},{"location":"#AstroProp.ascnode_condition-Tuple{Spacecraft}","page":"AstroProp","title":"AstroProp.ascnode_condition","text":"ascnode_condition(sc::Spacecraft)\n\nReturns a closure that evaluates the ascending node condition z = 0 using the spacecraft's registered :posvel index in the ODE registry. This interface is replaced by AstroCallbacks Calcs and will be deprecated in future releases.\n\n\n\n\n\n","category":"method"},{"location":"#AstroProp.check_duplicates-Tuple{Tuple{Vararg{CelestialBody}}}","page":"AstroProp","title":"AstroProp.check_duplicates","text":"function check_duplicates(bodies::Tuple{Vararg{CelestialBody}})\n\nValidate that all names in force model are unique\n\n\n\n\n\n","category":"method"},{"location":"#AstroProp.compute_point_mass_gravity!-Union{Tuple{T}, Tuple{Time, AbstractVector{T}, AbstractVector{T}, CelestialBody, Tuple{Vararg{CelestialBody}}}} where T","page":"AstroProp","title":"AstroProp.compute_point_mass_gravity!","text":"nbody_perts(t::Time, center::CelestialBody, pert_bodies::Tuple{Vararg{CelestialBody}}; jac::Bool=false)\n\nCompute the gravitational acceleration on a central body due to a tuple of perturbing bodies using Newtonian point-mass gravity.\n\nArguments\n\nt::Time: State epoch\nposvel::Vector  Orbit state (position and velocity) \ncenter::CelestialBody: The central body of propagation\npert_bodies::Tuple{Vararg{CelestialBody}}: Tuple of perturbing celestial bodies (e.g., Moon, Sun)\njac::Bool: Optional keyword (default = false) to return the Jacobian of the perturbing acceleration with respect to the central body's position\ntol::Real: Optional tolerance on singularity testing (default 1e-12)\n\nReturns\n\nIf jac == false: a_pert::Vector{Float64} — total perturbing acceleration\nIf jac == true: (a_pert::Vector{Float64}, jacobian::Matrix{Float64})\n\nNotes\n\nRequires AstroUniverse.translate(from::CelestialBody, to::CelestialBody, jd_tdb::Float64) to return the vector from from to to in inertial coordinates.\nUnits must be consistent with the gravitational parameters (mu) of the celestial bodies.\n\n\n\n\n\n","category":"method"},{"location":"#AstroProp.make_calc-Tuple{Any, Any}","page":"AstroProp","title":"AstroProp.make_calc","text":"make_calc(subject, var)\n\nCreate a calculation object from a subject and variable for use in stopping conditions.\n\nArguments\n\nsubject: The object to evaluate (e.g., Spacecraft, Maneuver, CelestialBody)\nvar: The calculation variable (must be <: AbstractOrbitVar)\n\nReturns\n\nA calculation object that can be used with get_calc() to evaluate the variable on the subject.\n\nExtensibility\n\nThis is an extensibility point for the stopping condition framework. Users and packages should extend this function for new subject/variable combinations:\n\n# Example extension for a custom subject type\nmake_calc(my_object::MyType, v::AbstractOrbitVar) = CustomCalc(my_object, v)\n\nExamples\n\n# Built-in case: spacecraft orbital variables\ncalc = make_calc(spacecraft, PosX())\ncurrent_x = get_calc(calc)\n\n\n\n\n\n","category":"method"},{"location":"#AstroProp.propagate-Tuple{DynSys, IntegratorConfig, Vararg{Any}}","page":"AstroProp","title":"AstroProp.propagate","text":"This interface will be deprecated in future releases.\n\npropagate(model::DynSys, config::IntegratorConfig, stop_conditions...; \n          direction=:forward, prop_stm=false, kwargs...)\n\nPropagate spacecraft orbital states using numerical integration.\n\n\n\n\n\n","category":"method"},{"location":"#AstroProp.propagate-Tuple{OrbitPropagator, Any, Vararg{Any}}","page":"AstroProp","title":"AstroProp.propagate","text":"propagate(op::OrbitPropagator, sc_or_scs, stops...; direction=:forward, kwargs...)\n\nNumerically integrate spacecraft equations of motion using propagator  until stopping conditions are met.\n\nArguments\n\nop::OrbitPropagator: Propagator configuration containing force model and integrator settings\nsc_or_scs: Single Spacecraft or Vector{Spacecraft} to propagate\nstops...: One or more StopAt stopping conditions\n\nKeyword Arguments\n\ndirection::Symbol=:forward: Integration direction (:forward or :backward)\nkwargs...: Additional arguments passed to the underlying ODE solver\n\nReturns\n\nODESolution from DifferentialEquations.jl containing the complete trajectory solution. Access final states via sol.u[end], times via sol.t, or interpolate at any time.\n\nExamples\n\nusing Epicycle\n\n# Spacecraft\nsat = Spacecraft(\n    state=CartesianState([7000.0, 300.0, 0.0, 0.0, 7.5, 0.03]),\n    time=Time(\"2015-09-21T12:23:12\", TAI(), ISOT()),\n    #name=\"SC-StopAt\",\n    coord_sys=CoordinateSystem(earth, ICRFAxes()),\n)\n\n# Forces + integrator\ngravity = PointMassGravity(earth, (moon,sun))\nforces  = ForceModel(gravity)\ninteg   = IntegratorConfig(Tsit5(); dt=10.0, reltol=1e-9, abstol=1e-9)\nprop    = OrbitPropagator(forces, integ)\n\n# Propagate to periapsis\npropagate(prop, sat, StopAt(sat, PosDotVel(), 0.0; direction=+1))\n\n# Propagate backwards to node\npropagate(prop, sat, StopAt(sat, PosX(), 0.0); direction=:backward)\n\n# Propagate multiple spacecraft with multiple stopping conditions\nsc1 = Spacecraft(); sc2 = Spacecraft() \nstop_sc1_node = StopAt(sc1, PosZ(), 0.0)\nstop_sc2_periapsis = StopAt(sc2, PosDotVel(), 0.0; direction=+1)\npropagate(prop, [sc1,sc2], stop_sc1_node, stop_sc2_periapsis)\n\n\n\n\n\n\n","category":"method"},{"location":"#AstroProp.rebind-Tuple{StopAt, Dict{Any, Any}}","page":"AstroProp","title":"AstroProp.rebind","text":"rebind(stop_condition::StopAt, owner_map::Dict{Any,Any})\n\nCreate a new StopAt condition with updated subject references based on an owner mapping.\n\nArguments\n\nstop_condition::StopAt: The original stopping condition\nowner_map::Dict{Any,Any}: Mapping from old subjects to new subjects\n\nReturns\n\nA new StopAt with the subject updated according to the mapping, while preserving the variable, target, and direction unchanged.\n\nUsage\n\nThis function is used internally when transferring stopping conditions between different propagation contexts where the subject objects may need to be remapped.\n\nExample\n\nold_stop = StopAt(old_spacecraft, PosX(), 7000.0)\nowner_map = Dict(old_spacecraft => new_spacecraft)\nnew_stop = rebind(old_stop, owner_map)\n# new_stop.subject == new_spacecraft, other fields unchanged\n\n\n\n\n\n","category":"method"},{"location":"#AstroProp.stop_affect!-Tuple{Any}","page":"AstroProp","title":"AstroProp.stop_affect!","text":"stop_affect!(integrator)\n\nCallback effect to stop the integration. This interface is replaced by AstroCallbacks Calcs and will be deprecated in future releases.\n\n\n\n\n\n","category":"method"},{"location":"#Index","page":"AstroProp","title":"Index","text":"","category":"section"},{"location":"","page":"AstroProp","title":"AstroProp","text":"","category":"page"}]
}
