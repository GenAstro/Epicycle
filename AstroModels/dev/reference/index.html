<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Reference · AstroModels.jl</title><meta name="title" content="Reference · AstroModels.jl"/><meta property="og:title" content="Reference · AstroModels.jl"/><meta property="twitter:title" content="Reference · AstroModels.jl"/><meta name="description" content="Documentation for AstroModels.jl."/><meta property="og:description" content="Documentation for AstroModels.jl."/><meta property="twitter:description" content="Documentation for AstroModels.jl."/><meta property="og:url" content="https://GenAstro.github.io/Epicycle/AstroModels/reference/"/><meta property="twitter:url" content="https://GenAstro.github.io/Epicycle/AstroModels/reference/"/><link rel="canonical" href="https://GenAstro.github.io/Epicycle/AstroModels/reference/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">QuickStart</a></li><li><span class="tocitem">Spacecraft</span><ul><li><a class="tocitem" href="../spacecraft/">Overview</a></li><li><a class="tocitem" href="../spacecraft_time/">Time</a></li><li><a class="tocitem" href="../spacecraft_state/">State</a></li><li><a class="tocitem" href="../spacecraft_coord_sys/">Coordinate System</a></li><li><a class="tocitem" href="../spacecraft_mass/">Mass</a></li><li><a class="tocitem" href="../spacecraft_cad_model/">CAD Model</a></li><li><a class="tocitem" href="../history/">History</a></li></ul></li><li class="is-active"><a class="tocitem" href>Reference</a><ul class="internal"><li><a class="tocitem" href="#Index"><span>Index</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Reference</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Reference</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/GenAstro/Epicycle" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/GenAstro/Epicycle/blob/main/AstroModels/docs/src/reference.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="API-Reference"><a class="docs-heading-anchor" href="#API-Reference">API Reference</a><a id="API-Reference-1"></a><a class="docs-heading-anchor-permalink" href="#API-Reference" title="Permalink"></a></h1><p>Complete API documentation for AstroModels.</p><article><details class="docstring" open="true"><summary id="AstroModels.AstroModels"><a class="docstring-binding" href="#AstroModels.AstroModels"><code>AstroModels.AstroModels</code></a> — <span class="docstring-category">Module</span></summary><section><div><p>Module containing physical models such as spacecraft. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenAstro/Epicycle/blob/445c1cd4752614a1c39a56da083003a73324c4ed/AstroModels/src/AstroModels.jl#L6-L9">source</a></section></details></article><article><details class="docstring" open="true"><summary id="AstroModels.CADModel"><a class="docstring-binding" href="#AstroModels.CADModel"><code>AstroModels.CADModel</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">CADModel(; file_path=&quot;&quot;, scale=1.0, visible=false)</code></pre><p>Represents a 3D CAD model for visualization of spacecraft or other objects.</p><p><strong>Keyword Arguments</strong></p><ul><li><code>file_path::String = &quot;&quot;</code> — Path to CAD model file (empty string means no model). If <code>visible=true</code>, must not be empty.</li><li><code>scale::Float64 = 1.0</code> — Scaling factor for the model. Must be positive (&gt; 0.0).</li><li><code>visible::Bool = false</code> — Whether the model should be displayed (default hidden until model is set)</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">model = CADModel(file_path=&quot;data/SpacecraftCADModel.obj&quot;, scale=10.0, visible=true)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenAstro/Epicycle/blob/445c1cd4752614a1c39a56da083003a73324c4ed/AstroModels/src/cadmodel.jl#L1-L15">source</a></section></details></article><article><details class="docstring" open="true"><summary id="AstroModels.CADModel-Tuple{}"><a class="docstring-binding" href="#AstroModels.CADModel-Tuple{}"><code>AstroModels.CADModel</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">CADModel(; file_path=&quot;&quot;, scale=1.0, visible=false)</code></pre><p>Kwarg constructor with defaults for all fields.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenAstro/Epicycle/blob/445c1cd4752614a1c39a56da083003a73324c4ed/AstroModels/src/cadmodel.jl#L22-L26">source</a></section></details></article><article><details class="docstring" open="true"><summary id="AstroModels.HistorySegment"><a class="docstring-binding" href="#AstroModels.HistorySegment"><code>AstroModels.HistorySegment</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">HistorySegment</code></pre><p>Represents a continuous segment of spacecraft trajectory history.</p><p>A history segment stores time-ordered state data for a portion of a spacecraft&#39;s  trajectory. Segments are used to delineate discontinuities (e.g., maneuvers) and  to organize mission events (e.g., propagation phases).</p><p><strong>Fields</strong></p><ul><li><code>times::Vector{Time}</code>: Ordered vector of time points</li><li><code>states::Vector{CartesianState{Float64}}</code>: Corresponding state vectors (always Float64)</li><li><code>coordinate_system::CoordinateSystem</code>: Reference frame for this segment</li><li><code>name::String</code>: Optional segment identifier (empty string if unnamed)</li><li><code>metadata::Dict{String,Any}</code>: Extensible metadata storage for custom attributes</li></ul><p><strong>Notes</strong></p><ul><li>States are always stored as Float64 regardless of input type (e.g., Dual numbers)</li><li>Immutable struct, but internal vectors can be mutated for efficiency</li><li><code>times</code> and <code>states</code> are parallel vectors of equal length</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">using AstroModels, AstroUniverse, AstroEpochs, AstroFrames, AstroStates

# Create empty segment
coord_sys = CoordinateSystem(earth, ICRFAxes())
segment = HistorySegment(coord_sys, name=&quot;initial_orbit&quot;)

# Create segment from existing data
times = [Time(&quot;2024-01-01T00:00:00&quot;, TAI(), ISOT()), 
         Time(&quot;2024-01-01T01:00:00&quot;, TAI(), ISOT())]
states = [CartesianState([7000.0, 0.0, 0.0, 0.0, 7.5, 0.0]),
          CartesianState([7100.0, 100.0, 0.0, 0.0, 7.4, 0.1])]
segment = HistorySegment(times, states, coord_sys, name=&quot;propagation_1&quot;)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenAstro/Epicycle/blob/445c1cd4752614a1c39a56da083003a73324c4ed/AstroModels/src/spacecraft_history.jl#L4-L40">source</a></section></details></article><article><details class="docstring" open="true"><summary id="AstroModels.HistorySegment-Tuple{CoordinateSystem}"><a class="docstring-binding" href="#AstroModels.HistorySegment-Tuple{CoordinateSystem}"><code>AstroModels.HistorySegment</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">HistorySegment(coord_system::CoordinateSystem; 
               name::String=&quot;&quot;, 
               metadata::Dict{String,Any}=Dict{String,Any}())</code></pre><p>Create an empty history segment with specified coordinate system.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenAstro/Epicycle/blob/445c1cd4752614a1c39a56da083003a73324c4ed/AstroModels/src/spacecraft_history.jl#L49-L55">source</a></section></details></article><article><details class="docstring" open="true"><summary id="AstroModels.HistorySegment-Union{Tuple{S}, Tuple{T}, Tuple{Vector{T}, Vector{S}, CoordinateSystem}} where {T&lt;:Time, S&lt;:CartesianState}"><a class="docstring-binding" href="#AstroModels.HistorySegment-Union{Tuple{S}, Tuple{T}, Tuple{Vector{T}, Vector{S}, CoordinateSystem}} where {T&lt;:Time, S&lt;:CartesianState}"><code>AstroModels.HistorySegment</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">HistorySegment(times::Vector{&lt;:Time}, 
               states::Vector{CartesianState{Float64}}, 
               coord_system::CoordinateSystem;
               name::String=&quot;&quot;,
               metadata::Dict{String,Any}=Dict{String,Any}())</code></pre><p>Create a history segment from existing time and state data.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenAstro/Epicycle/blob/445c1cd4752614a1c39a56da083003a73324c4ed/AstroModels/src/spacecraft_history.jl#L66-L74">source</a></section></details></article><article><details class="docstring" open="true"><summary id="AstroModels.Spacecraft"><a class="docstring-binding" href="#AstroModels.Spacecraft"><code>AstroModels.Spacecraft</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">mutable struct Spacecraft{S&lt;:OrbitState, TT&lt;:Time, CS&lt;:AbstractCoordinateSystem, T&lt;:Real}</code></pre><p>Spacecraft struct with state, time, mass, name, history, and coordinate system and other data</p><p>Fields</p><ul><li>state::S — orbital state as an OrbitState struct</li><li>time::TT — epoch as a Time struct</li><li>mass::T — total mass </li><li>name::String — user label.</li><li>history::SpacecraftHistory — trajectory history organized into segments</li><li>coord_sys::CS — coordinate system (origin and axes) associated with the spacecraft.</li><li>cad_model::CADModel — 3D model for visualization</li></ul><p><strong>Notes:</strong></p><ul><li>Use the keyword constructor to create spacecraft and only define the fields you want to change from the defaults.</li><li>State can be provided two ways as shown in the example below</li><li>history stores trajectory data in segments; use <code>history.segments</code> to access individual HistorySegments</li><li>Numeric parameter T is chosen by promotion: T = promote_type(eltype(state), typeof(time.jd1), typeof(mass)).</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">using AstroModels, AstroStates, AstroEpochs, AstroFrames, AstroUniverse

sc = Spacecraft(
    state = CartesianState([7000.0, 300.0, 0.0, 0.0, 7.5, 0.03]),
    time  = Time(&quot;2015-09-21T00:00:00&quot;, TAI(), ISOT()),
    mass  = 1000.0,
    name  = &quot;Demo&quot;
)

# alternative epoch definition
sc = Spacecraft(state = OrbitState([7000.0, 300.0, 0.0, 0.0, 7.5, 0.03],Cartesian()))</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenAstro/Epicycle/blob/445c1cd4752614a1c39a56da083003a73324c4ed/AstroModels/src/spacecraft.jl#L1-L35">source</a></section></details></article><article><details class="docstring" open="true"><summary id="AstroModels.Spacecraft-Tuple{}"><a class="docstring-binding" href="#AstroModels.Spacecraft-Tuple{}"><code>AstroModels.Spacecraft</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">Spacecraft(; state = CartesianState([7000.0, 0.0, 0.0, 0.0, 7.5, 0.0]),
                  time = Time(&quot;2015-09-21T12:23:12&quot;, UTC(), ISOT()),
                  mass = 1000.0,
                  name = &quot;unnamed&quot;,
                  history = nothing,
                  coord_sys = CoordinateSystem(earth, ICRFAxes()))</code></pre><p>Kwarg outer constructor for Spacecraft with defaults for all fields.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenAstro/Epicycle/blob/445c1cd4752614a1c39a56da083003a73324c4ed/AstroModels/src/spacecraft.jl#L99-L108">source</a></section></details></article><article><details class="docstring" open="true"><summary id="AstroModels.Spacecraft-Union{Tuple{CS}, Tuple{TT}, Tuple{Union{AbstractState, OrbitState}, TT}} where {TT&lt;:Time, CS&lt;:AbstractCoordinateSystem}"><a class="docstring-binding" href="#AstroModels.Spacecraft-Union{Tuple{CS}, Tuple{TT}, Tuple{Union{AbstractState, OrbitState}, TT}} where {TT&lt;:Time, CS&lt;:AbstractCoordinateSystem}"><code>AstroModels.Spacecraft</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">Spacecraft(state::Union{AbstractState,OrbitState}, time::TT; mass=1000.0, name=&quot;unnamed&quot;,
           history=nothing, coord_sys=CoordinateSystem(earth, ICRFAxes())) where {TT&lt;:Time}</code></pre><p>Outer positional constructor for Spacecraft that promotes numeric types as needed.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenAstro/Epicycle/blob/445c1cd4752614a1c39a56da083003a73324c4ed/AstroModels/src/spacecraft.jl#L53-L58">source</a></section></details></article><article><details class="docstring" open="true"><summary id="AstroModels.SpacecraftHistory"><a class="docstring-binding" href="#AstroModels.SpacecraftHistory"><code>AstroModels.SpacecraftHistory</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">SpacecraftHistory</code></pre><p>Container for spacecraft trajectory history, organized into segments.</p><p>A SpacecraftHistory stores the complete trajectory of a spacecraft as a collection  of segments. Each segment represents a continuous portion of the  trajectory, with segments typically separated by discontinuities (e.g., maneuvers)  or mission phase boundaries.</p><p><strong>Fields</strong></p><ul><li><code>segments::Vector{HistorySegment}</code>: Solution trajectory segments</li><li><code>iterations::Vector{HistorySegment}</code>: Solver iteration segments (diagnostic data)</li><li><code>record_segments::Bool</code>: Enable solution segment recording (default: true)</li><li><code>record_iterations::Bool</code>: Enable iteration segment recording (default: false)</li></ul><p><strong>Notes</strong></p><ul><li>Mutable struct to allow solver to control recording flags</li><li>Empty history is valid (zero segments)</li><li>Provides iteration, indexing, and standard collection interfaces</li><li>Iteration and indexing operate on <code>segments</code> only (solution trajectory)</li><li>Access <code>iterations</code> directly for diagnostic data: <code>history.iterations</code></li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">using AstroModels, AstroEpochs, AstroUniverse, AstroFrames

# Basic usage - record solution trajectory (default)
history = SpacecraftHistory()
coord_sys = CoordinateSystem(earth, ICRFAxes())

segment1 = HistorySegment(coord_sys, name=&quot;orbit_1&quot;)
push_segment!(history, segment1)

# Iterate over solution segments
for (i, segment) in enumerate(history)
    println(&quot;Segment &quot;, i, &quot;: &quot;, segment.name, &quot; (&quot;, length(segment.times), &quot; points)&quot;)
end

# Access by index (operates on solution segments only)
first_segment = history[1]
println(&quot;History contains &quot;, length(history), &quot; solution segments&quot;)

# Advanced: Solver iteration recording for diagnostics
# Disable solution recording, enable iteration recording
history.record_segments = false
history.record_iterations = true

# During optimization, segments go to iterations vector
for iter in 1:10
    segment = HistorySegment(coord_sys, name=&quot;iteration_$iter&quot;)
    push_segment!(history, segment)  # Routes to history.iterations
end

# Switch back for final solution
history.record_segments = true
history.record_iterations = false
final_segment = HistorySegment(coord_sys, name=&quot;solution&quot;)
push_segment!(history, final_segment)  # Routes to history.segments

# Result: 1 solution segment, 10 diagnostic iterations
println(length(history))             # 1 (solution only)
println(length(history.iterations))  # 10 (diagnostic data)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenAstro/Epicycle/blob/445c1cd4752614a1c39a56da083003a73324c4ed/AstroModels/src/spacecraft_history.jl#L241-L305">source</a></section></details></article><article><details class="docstring" open="true"><summary id="AstroModels.SpacecraftHistory-Tuple{Vector{HistorySegment}}"><a class="docstring-binding" href="#AstroModels.SpacecraftHistory-Tuple{Vector{HistorySegment}}"><code>AstroModels.SpacecraftHistory</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">SpacecraftHistory(segments::Vector{HistorySegment})</code></pre><p>Create a SpacecraftHistory from an existing vector of segments with default recording settings.</p><p><strong>Defaults</strong></p><ul><li><code>iterations</code>: Empty vector (no iteration data)</li><li><code>record_segments = true</code>: Solution trajectory recording enabled</li><li><code>record_iterations = false</code>: Iteration recording disabled</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenAstro/Epicycle/blob/445c1cd4752614a1c39a56da083003a73324c4ed/AstroModels/src/spacecraft_history.jl#L324-L333">source</a></section></details></article><article><details class="docstring" open="true"><summary id="AstroModels.SpacecraftHistory-Tuple{}"><a class="docstring-binding" href="#AstroModels.SpacecraftHistory-Tuple{}"><code>AstroModels.SpacecraftHistory</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">SpacecraftHistory()</code></pre><p>Create an empty SpacecraftHistory with default settings.</p><p><strong>Defaults</strong></p><ul><li><code>record_segments = true</code>: Solution trajectory recording enabled</li><li><code>record_iterations = false</code>: Iteration recording disabled (diagnostic mode off)</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenAstro/Epicycle/blob/445c1cd4752614a1c39a56da083003a73324c4ed/AstroModels/src/spacecraft_history.jl#L313-L321">source</a></section></details></article><article><details class="docstring" open="true"><summary id="AstroModels._indent_and_print-Tuple{IO, Any, AbstractString}"><a class="docstring-binding" href="#AstroModels._indent_and_print-Tuple{IO, Any, AbstractString}"><code>AstroModels._indent_and_print</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">_indent_and_print(io::IO, obj, prefix::AbstractString)</code></pre><p>Indent and print composed objects using their own show methods</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenAstro/Epicycle/blob/445c1cd4752614a1c39a56da083003a73324c4ed/AstroModels/src/spacecraft.jl#L133-L137">source</a></section></details></article><article><details class="docstring" open="true"><summary id="AstroModels._value_to_float64-Tuple{Real}"><a class="docstring-binding" href="#AstroModels._value_to_float64-Tuple{Real}"><code>AstroModels._value_to_float64</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">_value_to_float64(x::Real)</code></pre><p>Helper to safely convert any Real to Float64, handling Dual numbers from AD.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenAstro/Epicycle/blob/445c1cd4752614a1c39a56da083003a73324c4ed/AstroModels/src/spacecraft_history.jl#L93-L97">source</a></section></details></article><article><details class="docstring" open="true"><summary id="AstroModels.get_state-Tuple{Spacecraft, AbstractOrbitStateType}"><a class="docstring-binding" href="#AstroModels.get_state-Tuple{Spacecraft, AbstractOrbitStateType}"><code>AstroModels.get_state</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">get_state(sc::Spacecraft, target::AbstractOrbitStateType) -&gt; AbstractOrbitState</code></pre><p>Return the spacecraft&#39;s orbital state as the concrete type specified by <code>target</code>, converting if needed. Does not mutate <code>sc</code>.</p><p>Notes</p><ul><li>If conversion requires the gravitational parameter μ, it is taken from <code>sc.coord_sys.origin.mu</code> when available; otherwise an error is thrown.</li><li>If the current state already matches <code>target</code>, the existing state is returned without conversion to the new type.</li><li>State is returned in the coordinate system of the spacecraft; no coordinate transformations are performed.</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">using AstroModels
sc = Spacecraft(
           state=CartesianState([7000.0, 300.0, 0.0, 0.0, 7.5, 0.03]),
           time=Time(&quot;2015-09-21T12:23:12&quot;, TAI(), ISOT())
           );</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenAstro/Epicycle/blob/445c1cd4752614a1c39a56da083003a73324c4ed/AstroModels/src/spacecraft.jl#L164-L187">source</a></section></details></article><article><details class="docstring" open="true"><summary id="AstroModels.push_segment!-Tuple{SpacecraftHistory, HistorySegment}"><a class="docstring-binding" href="#AstroModels.push_segment!-Tuple{SpacecraftHistory, HistorySegment}"><code>AstroModels.push_segment!</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">push_segment!(history::SpacecraftHistory, segment::HistorySegment)</code></pre><p>Add a segment to the history, routing based on recording flags.</p><p><strong>Routing Logic</strong></p><ul><li>If <code>record_iterations=true</code>: adds to <code>history.iterations</code> (diagnostic data)</li><li>Else if <code>record_segments=true</code>: adds to <code>history.segments</code> (solution trajectory)</li><li>Else: no-op (segment not recorded)</li></ul><p><strong>Notes</strong></p><p>This routing is controlled by the solver during trajectory optimization:</p><ul><li>During optimization iterations: <code>record_iterations=true, record_segments=false</code></li><li>Final solution run: <code>record_iterations=false, record_segments=true</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenAstro/Epicycle/blob/445c1cd4752614a1c39a56da083003a73324c4ed/AstroModels/src/spacecraft_history.jl#L370-L384">source</a></section></details></article><article><details class="docstring" open="true"><summary id="AstroModels.set_posvel!-Tuple{Spacecraft, AbstractVector{&lt;:Real}}"><a class="docstring-binding" href="#AstroModels.set_posvel!-Tuple{Spacecraft, AbstractVector{&lt;:Real}}"><code>AstroModels.set_posvel!</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">set_posvel!(sc::Spacecraft, x::AbstractVector{&lt;:Real})</code></pre><p>Set the Cartesian position-velocity vector [x, y, z, vx, vy, vz] for <code>sc</code> in-place.</p><p>Supported</p><ul><li><code>OrbitState</code> with <code>statetype == Cartesian()</code>.</li></ul><p>Limitations</p><ul><li>Other state representations currently throw an ArgumentError.  Use <code>get_state(sc, Cartesian())</code> first.</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">using AstroModels, AstroStates, AstroEpochs
sc = Spacecraft(
           state=CartesianState([7000.0, 300.0, 0.0, 0.0, 7.5, 0.03]),
           time=Time(&quot;2015-09-21T12:23:12&quot;, TAI(), ISOT())
       );
set_posvel!(sc, [7050.0, 0.0, 0.0, 0.0, 7.6, 0.0]);
to_posvel(sc)

# output
6-element Vector{Float64}:
 7050.0
    0.0
    0.0
    0.0
    7.6
    0.0</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenAstro/Epicycle/blob/445c1cd4752614a1c39a56da083003a73324c4ed/AstroModels/src/spacecraft.jl#L265-L297">source</a></section></details></article><article><details class="docstring" open="true"><summary id="AstroModels.state_eltype-Tuple{OrbitState}"><a class="docstring-binding" href="#AstroModels.state_eltype-Tuple{OrbitState}"><code>AstroModels.state_eltype</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">state_eltype(os::OrbitState) = eltype(os.state)</code></pre><p>Returns the type of the elements in the state vector of an OrbitState.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenAstro/Epicycle/blob/445c1cd4752614a1c39a56da083003a73324c4ed/AstroModels/src/spacecraft.jl#L46-L50">source</a></section></details></article><article><details class="docstring" open="true"><summary id="AstroModels.to_float64-Tuple{CartesianState{Float64}}"><a class="docstring-binding" href="#AstroModels.to_float64-Tuple{CartesianState{Float64}}"><code>AstroModels.to_float64</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">to_float64(state::CartesianState{Float64})
to_float64(state::CartesianState)</code></pre><p>Convert a CartesianState of any numeric type to CartesianState{Float64}.</p><p>This function handles automatic conversion from automatic differentiation types  (Dual numbers), BigFloat, and other numeric types to Float64 for history storage.</p><p><strong>Arguments</strong></p><ul><li><code>state::CartesianState</code>: State to convert (any numeric type parameter)</li></ul><p><strong>Returns</strong></p><ul><li><code>CartesianState{Float64}</code>: State with Float64 components</li></ul><p><strong>Notes</strong></p><ul><li>No-op for CartesianState{Float64} (returns input unchanged)</li><li>Uses <code>to_vector()</code> and broadcasts Float64 conversion</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs"># From Dual numbers (automatic differentiation)
state_dual = CartesianState{Dual}([...])
state_f64 = to_float64(state_dual)

# From BigFloat
state_big = CartesianState{BigFloat}([...])
state_f64 = to_float64(state_big)

# From Float64 (no-op)
state = CartesianState([7000.0, 0.0, 0.0, 0.0, 7.5, 0.0])
same_state = to_float64(state)  </code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenAstro/Epicycle/blob/445c1cd4752614a1c39a56da083003a73324c4ed/AstroModels/src/spacecraft_history.jl#L144-L177">source</a></section></details></article><article><details class="docstring" open="true"><summary id="AstroModels.to_float64-Tuple{Time{Float64}}"><a class="docstring-binding" href="#AstroModels.to_float64-Tuple{Time{Float64}}"><code>AstroModels.to_float64</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">to_float64(time::Time{Float64})
to_float64(time::Time)</code></pre><p>Convert a Time of any numeric type to Time{Float64}.</p><p>This function handles automatic conversion from automatic differentiation types  (Dual numbers), BigFloat, and other numeric types to Float64 for history storage.</p><p><strong>Arguments</strong></p><ul><li><code>time::Time</code>: Time to convert (any numeric type parameter)</li></ul><p><strong>Returns</strong></p><ul><li><code>Time{Float64}</code>: Time with Float64 components</li></ul><p><strong>Notes</strong></p><ul><li>No-op for Time{Float64} (returns input unchanged)</li><li>Preserves time scale and format during conversion</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs"># From Dual numbers (automatic differentiation)
time_dual = Time{Dual}(...)
time_f64 = to_float64(time_dual)

# From Float64 (no-op)
time = Time(&quot;2024-01-01T00:00:00&quot;, TAI(), ISOT())
same_time = to_float64(time)  # Returns input unchanged</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenAstro/Epicycle/blob/445c1cd4752614a1c39a56da083003a73324c4ed/AstroModels/src/spacecraft_history.jl#L111-L140">source</a></section></details></article><article><details class="docstring" open="true"><summary id="AstroModels.to_posvel-Tuple{Spacecraft}"><a class="docstring-binding" href="#AstroModels.to_posvel-Tuple{Spacecraft}"><code>AstroModels.to_posvel</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">to_posvel(sc::Spacecraft) -&gt; Vector{&lt;:Real}</code></pre><p>Return the Cartesian position-velocity vector [x, y, z, vx, vy, vz] for <code>sc</code> in its current coordinate system, converting the stored orbital state if needed.</p><p>Currently supported</p><ul><li>OrbitState with <code>statetype == Cartesian()</code> — returns the internal 6-vector (fast path).</li><li>CartesianState — returns <code>to_vector(state)</code>.</li></ul><p>Limitations</p><ul><li>Other state types currently throw an ArgumentError. Use <code>get_state(sc, Cartesian())</code> first or extend conversions.</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">using AstroModels, AstroStates, AstroEpochs, AstroFrames, AstroUniverse
sc = Spacecraft(
           state=CartesianState([7000.0, 300.0, 0.0, 0.0, 7.5, 0.03]),
           time=Time(&quot;2015-09-21T12:23:12&quot;, TAI(), ISOT()));
to_posvel(sc)

# output
6-element Vector{Float64}:
 7000.0
  300.0
    0.0
    0.0
    7.5
    0.03</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenAstro/Epicycle/blob/445c1cd4752614a1c39a56da083003a73324c4ed/AstroModels/src/spacecraft.jl#L219-L251">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Base.copy-Tuple{SpacecraftHistory}"><a class="docstring-binding" href="#Base.copy-Tuple{SpacecraftHistory}"><code>Base.copy</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">Base.copy(history::SpacecraftHistory)</code></pre><p>Create a deep copy of a SpacecraftHistory, copying all segments and iterations.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenAstro/Epicycle/blob/445c1cd4752614a1c39a56da083003a73324c4ed/AstroModels/src/spacecraft_history.jl#L346-L350">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Base.deepcopy_internal-Tuple{Spacecraft, IdDict}"><a class="docstring-binding" href="#Base.deepcopy_internal-Tuple{Spacecraft, IdDict}"><code>Base.deepcopy_internal</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">Base.deepcopy_internal(sc::Spacecraft, dict::IdDict)</code></pre><p>Deep copy a spacecraft to ensure no aliasing of inner mutable fields</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenAstro/Epicycle/blob/445c1cd4752614a1c39a56da083003a73324c4ed/AstroModels/src/spacecraft.jl#L146-L150">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Base.deepcopy_internal-Tuple{SpacecraftHistory, IdDict}"><a class="docstring-binding" href="#Base.deepcopy_internal-Tuple{SpacecraftHistory, IdDict}"><code>Base.deepcopy_internal</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">Base.deepcopy_internal(history::SpacecraftHistory, dict::IdDict)</code></pre><p>Deep copy implementation for SpacecraftHistory to ensure proper copying of mutable fields.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenAstro/Epicycle/blob/445c1cd4752614a1c39a56da083003a73324c4ed/AstroModels/src/spacecraft_history.jl#L356-L360">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Base.promote-Union{Tuple{Tnew}, Tuple{T}, Tuple{CS}, Tuple{TT}, Tuple{S}, Tuple{Spacecraft{S, TT, CS, T}, Type{Tnew}}} where {S, TT, CS, T, Tnew&lt;:Real}"><a class="docstring-binding" href="#Base.promote-Union{Tuple{Tnew}, Tuple{T}, Tuple{CS}, Tuple{TT}, Tuple{S}, Tuple{Spacecraft{S, TT, CS, T}, Type{Tnew}}} where {S, TT, CS, T, Tnew&lt;:Real}"><code>Base.promote</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">Base.promote(sc::Spacecraft{S,TT,CS,T}, ::Type{Tnew}) where {S,TT,CS,T,Tnew&lt;:Real}</code></pre><p>Promotes a Spacecraft to a new numeric type <code>Tnew</code> for automatic differentiation support. The state, time, and mass are promoted to <code>Tnew</code>, while history remains as Float64 for efficiency.</p><p>This enables AD workflows where computation types (e.g., ForwardDiff.Dual) are promoted while preserving Float64 ephemeris storage.</p><p><strong>Arguments</strong></p><ul><li><code>sc::Spacecraft</code>: The spacecraft to promote</li><li><code>::Type{Tnew}</code>: Target numeric type (e.g., ForwardDiff.Dual{Nothing,Float64,3})</li></ul><p><strong>Returns</strong></p><ul><li><code>Spacecraft{S_new, TT_new, CS, Tnew}</code>: Promoted spacecraft</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">using ForwardDiff
sc = Spacecraft(state=CartesianState([7000.0, 0.0, 0.0, 0.0, 7.5, 0.0]))
sc_dual = promote(sc, ForwardDiff.Dual{Nothing,Float64,3})</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenAstro/Epicycle/blob/445c1cd4752614a1c39a56da083003a73324c4ed/AstroModels/src/spacecraft.jl#L336-L358">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Base.show-Tuple{IO, CADModel}"><a class="docstring-binding" href="#Base.show-Tuple{IO, CADModel}"><code>Base.show</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">Base.show(io::IO, model::CADModel)</code></pre><p>Pretty-print CADModel configuration.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenAstro/Epicycle/blob/445c1cd4752614a1c39a56da083003a73324c4ed/AstroModels/src/cadmodel.jl#L41-L45">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Base.show-Tuple{IO, HistorySegment}"><a class="docstring-binding" href="#Base.show-Tuple{IO, HistorySegment}"><code>Base.show</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">Base.show(io::IO, segment::HistorySegment)</code></pre><p>Pretty-print a HistorySegment in a human-readable, multi-line summary.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenAstro/Epicycle/blob/445c1cd4752614a1c39a56da083003a73324c4ed/AstroModels/src/spacecraft_history.jl#L185-L189">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Base.show-Tuple{IO, SpacecraftHistory}"><a class="docstring-binding" href="#Base.show-Tuple{IO, SpacecraftHistory}"><code>Base.show</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">Base.show(io::IO, history::SpacecraftHistory)</code></pre><p>Display a SpacecraftHistory in a human-readable format.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenAstro/Epicycle/blob/445c1cd4752614a1c39a56da083003a73324c4ed/AstroModels/src/spacecraft_history.jl#L395-L399">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Base.show-Tuple{IO, Spacecraft}"><a class="docstring-binding" href="#Base.show-Tuple{IO, Spacecraft}"><code>Base.show</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">Base.show(io::IO, sc::Spacecraft)</code></pre><p>Pretty-print a Spacecraft in a human-readable, multi-line summary.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenAstro/Epicycle/blob/445c1cd4752614a1c39a56da083003a73324c4ed/AstroModels/src/spacecraft.jl#L119-L123">source</a></section></details></article><h2 id="Index"><a class="docs-heading-anchor" href="#Index">Index</a><a id="Index-1"></a><a class="docs-heading-anchor-permalink" href="#Index" title="Permalink"></a></h2><ul><li><a href="#AstroModels.AstroModels"><code>AstroModels.AstroModels</code></a></li><li><a href="#AstroModels.CADModel-Tuple{}"><code>AstroModels.CADModel</code></a></li><li><a href="#AstroModels.CADModel"><code>AstroModels.CADModel</code></a></li><li><a href="#AstroModels.HistorySegment-Union{Tuple{S}, Tuple{T}, Tuple{Vector{T}, Vector{S}, CoordinateSystem}} where {T&lt;:Time, S&lt;:CartesianState}"><code>AstroModels.HistorySegment</code></a></li><li><a href="#AstroModels.HistorySegment-Tuple{CoordinateSystem}"><code>AstroModels.HistorySegment</code></a></li><li><a href="#AstroModels.HistorySegment"><code>AstroModels.HistorySegment</code></a></li><li><a href="#AstroModels.Spacecraft"><code>AstroModels.Spacecraft</code></a></li><li><a href="#AstroModels.Spacecraft-Union{Tuple{CS}, Tuple{TT}, Tuple{Union{AbstractState, OrbitState}, TT}} where {TT&lt;:Time, CS&lt;:AbstractCoordinateSystem}"><code>AstroModels.Spacecraft</code></a></li><li><a href="#AstroModels.Spacecraft-Tuple{}"><code>AstroModels.Spacecraft</code></a></li><li><a href="#AstroModels.SpacecraftHistory-Tuple{}"><code>AstroModels.SpacecraftHistory</code></a></li><li><a href="#AstroModels.SpacecraftHistory"><code>AstroModels.SpacecraftHistory</code></a></li><li><a href="#AstroModels.SpacecraftHistory-Tuple{Vector{HistorySegment}}"><code>AstroModels.SpacecraftHistory</code></a></li><li><a href="#AstroModels._indent_and_print-Tuple{IO, Any, AbstractString}"><code>AstroModels._indent_and_print</code></a></li><li><a href="#AstroModels._value_to_float64-Tuple{Real}"><code>AstroModels._value_to_float64</code></a></li><li><a href="#AstroModels.get_state-Tuple{Spacecraft, AbstractOrbitStateType}"><code>AstroModels.get_state</code></a></li><li><a href="#AstroModels.push_segment!-Tuple{SpacecraftHistory, HistorySegment}"><code>AstroModels.push_segment!</code></a></li><li><a href="#AstroModels.set_posvel!-Tuple{Spacecraft, AbstractVector{&lt;:Real}}"><code>AstroModels.set_posvel!</code></a></li><li><a href="#AstroModels.state_eltype-Tuple{OrbitState}"><code>AstroModels.state_eltype</code></a></li><li><a href="#AstroModels.to_float64-Tuple{Time{Float64}}"><code>AstroModels.to_float64</code></a></li><li><a href="#AstroModels.to_float64-Tuple{CartesianState{Float64}}"><code>AstroModels.to_float64</code></a></li><li><a href="#AstroModels.to_posvel-Tuple{Spacecraft}"><code>AstroModels.to_posvel</code></a></li><li><a href="#Base.copy-Tuple{SpacecraftHistory}"><code>Base.copy</code></a></li><li><a href="#Base.deepcopy_internal-Tuple{Spacecraft, IdDict}"><code>Base.deepcopy_internal</code></a></li><li><a href="#Base.deepcopy_internal-Tuple{SpacecraftHistory, IdDict}"><code>Base.deepcopy_internal</code></a></li><li><a href="#Base.promote-Union{Tuple{Tnew}, Tuple{T}, Tuple{CS}, Tuple{TT}, Tuple{S}, Tuple{Spacecraft{S, TT, CS, T}, Type{Tnew}}} where {S, TT, CS, T, Tnew&lt;:Real}"><code>Base.promote</code></a></li><li><a href="#Base.show-Tuple{IO, SpacecraftHistory}"><code>Base.show</code></a></li><li><a href="#Base.show-Tuple{IO, Spacecraft}"><code>Base.show</code></a></li><li><a href="#Base.show-Tuple{IO, HistorySegment}"><code>Base.show</code></a></li><li><a href="#Base.show-Tuple{IO, CADModel}"><code>Base.show</code></a></li></ul></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../history/">« History</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.16.1 on <span class="colophon-date" title="Sunday 11 January 2026 17:47">Sunday 11 January 2026</span>. Using Julia version 1.12.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
